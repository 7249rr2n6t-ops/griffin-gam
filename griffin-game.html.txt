<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Griffin-Style Runner</title>

<style>
  body {
    margin: 0;
    background: #87ceeb;
    overflow: hidden;
    font-family: Arial, sans-serif;
  }

  #game {
    position: relative;
    width: 100vw;
    height: 100vh;
  }

  #player {
    position: absolute;
    width: 60px;
    height: 80px;
    background: green;
    bottom: 80px;
    left: 80px;
    border-radius: 10px;
  }

  #player::after {
    content: "";
    position: absolute;
    width: 20px;
    height: 10px;
    border: 3px solid black;
    border-radius: 10px;
    top: 20px;
    left: 18px;
  }

  .obstacle {
    position: absolute;
    width: 40px;
    height: 80px;
    background: red;
    bottom: 80px;
  }

  #ground {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 80px;
    background: #654321;
  }

  #score {
    position: absolute;
    top: 20px;
    left: 20px;
    font-size: 24px;
    color: black;
  }

  #gameOver {
    display: none;
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.5);
    color: white;
    font-size: 40px;
    align-items: center;
    justify-content: center;
    flex-direction: column;
  }

  button {
    margin-top: 20px;
    font-size: 20px;
    padding: 10px 20px;
  }
</style>
</head>

<body>
<div id="game">
  <div id="score">Score: 0</div>
  <div id="player"></div>
  <div id="ground"></div>

  <div id="gameOver">
    <div>GAME OVER</div>
    <button onclick="restart()">Restart</button>
  </div>
</div>

<script>
  const player = document.getElementById("player");
  const game = document.getElementById("game");
  const scoreDisplay = document.getElementById("score");
  const gameOverScreen = document.getElementById("gameOver");

  let y = 0;
  let velocity = 0;
  let gravity = -1;
  let jumping = false;
  let score = 0;
  let obstacle;
  let running = true;

  function jump() {
    if (!jumping && running) {
      velocity = 18;
      jumping = true;
    }
  }

  document.addEventListener("click", jump);
  document.addEventListener("touchstart", jump);

  function createObstacle() {
    obstacle = document.createElement("div");
    obstacle.className = "obstacle";
    obstacle.style.left = "100%";
    game.appendChild(obstacle);

    let moveInterval = setInterval(() => {
      if (!running) {
        clearInterval(moveInterval);
        return;
      }

      let x = obstacle.offsetLeft;
      obstacle.style.left = x - 6 + "px";

      // Collision
      const p = player.getBoundingClientRect();
      const o = obstacle.getBoundingClientRect();

      if (
        p.left < o.right &&
        p.right > o.left &&
        p.bottom > o.top &&
        p.top < o.bottom
      ) {
        endGame();
        clearInterval(moveInterval);
      }

      if (x < -50) {
        obstacle.remove();
        score++;
        scoreDisplay.innerText = "Score: " + score;
        clearInterval(moveInterval);
      }
    }, 20);
  }

  function gameLoop() {
    if (!running) return;

    velocity += gravity;
    y += velocity;

    if (y < 0) {
      y = 0;
      velocity = 0;
      jumping = false;
    }

    player.style.bottom = y + 80 + "px";
    requestAnimationFrame(gameLoop);
  }

  function startObstacles() {
    setInterval(() => {
      if (running) createObstacle();
    }, 2000);
  }

  function endGame() {
    running = false;
    gameOverScreen.style.display = "flex";
  }

  function restart() {
    location.reload();
  }

  gameLoop();
  startObstacles();
</script>
</body>
</html>